<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Relationship Fundamentals - iModel.js</title>
    <meta name="og:title" content="Relationship Fundamentals - iModel.js">
    <meta name="twitter:title" content="Relationship Fundamentals - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/bundle.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
    
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/landingPage.css"> 
    
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/devRegistration.css">  
        <link rel='shortcut icon' type='image/x-icon' href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/ class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/" class="navbar-brand">
                            <img id="site-logo" class="site-logo" src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-logo.svg" /> 
                            <img id="site-logo-small" class="site-logo-small" src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-icon.svg" style="display:none;"/> 
                    </a>
                    <button class="navbar-toggler no-user-select mr-auto" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-header"></span>
                    </button>
                    <ul class="navbar-nav ml-auto pr-0 nav-search">
                        <span class='search-bar'>
                          <li>
                            <div id='search-container'>
                            </div>
                          </li>
                          <script>
                            (function() {
                              var cx = '018053174497532353467:v_gnrjjlqwc';
                              var gcse = document.createElement('script');
                              gcse.type = 'text/javascript';
                              gcse.async = true;
                              gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                              var s = document.getElementsByTagName('script')[0];
                              s.parentNode.insertBefore(gcse, s);
                            })();
                          </script>
                          <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                        </span>
                    </ul>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/getting-started">Getting Started</a></li><li class="nav-item active"><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/bis">BIS</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/reference">API Reference</a></li><li class="nav-item change-history-tab "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/changehistory">v0.190.0</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
<div id='main-wrapper'>
    <nav id='sidebar'>
        <div id='table-of-contents' class="custom-scrollbar">
            <div id="dismiss">
                <i id="dismiss-arrow" class="icon icon-chevron-left no-user-select"></i>
            </div>
            <hr id="dismiss-hr" class='sm-only'>
            <ul id='main-navigation-list'>
                <html><head></head><body><h3 id="bis">BIS</h3>
    <ul>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/bis/" class="table-of-contents-link">Introduction</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/modeling-with-bis" class="table-of-contents-link">Modeling with BIS</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/bis-organization" class="table-of-contents-link">BIS Organization</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/fabric-of-the-universe" class="table-of-contents-link">Fabric of the Universe</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/element-fundamentals" class="table-of-contents-link">Element Fundamentals</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/codes" class="table-of-contents-link">Codes</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/elementaspect-fundamentals" class="table-of-contents-link">ElementAspect Fundamentals</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/mixins" class="table-of-contents-link">Mixins</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/model-fundamentals" class="table-of-contents-link">Model Fundamentals</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/relationship-fundamentals" class="table-of-contents-link">Relationship Fundamentals</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/schemas-domains" class="table-of-contents-link">Schemas (&#x201C;Domains&#x201D;)</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/information-hierarchy" class="table-of-contents-link">Information Hierarchy</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/physical-models-and-elements" class="table-of-contents-link">Physical Models and Elements</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/functional-models-and-elements" class="table-of-contents-link">Functional Models and Elements</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/analysis-models-and-elements" class="table-of-contents-link">Analysis Models and Elements</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/information-models-and-elements" class="table-of-contents-link">Information Models and Elements</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/physical-hierarchy-organization" class="table-of-contents-link">PhysicalModel Hierarchy</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/categories" class="table-of-contents-link">Categories</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/schema-customization" class="table-of-contents-link">Schema Customization</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/appendix-a-data-evolution-across-time" class="table-of-contents-link">Data Evolution Across Time</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/schema-versioning-and-generations" class="table-of-contents-link">Schema Versioning</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/glossary" class="table-of-contents-link">BIS Glossary</a></li>
    </ul>
    <!-- TODO: The following are not linked in...?
    ./domains/*
    ./intro/appendix-c-bis-domain-design-fundamentals.md
    ./intro/bis-schema-validation.md
    ./intro/units.md
    -->
    <p>&#xA0;</p>
    <h3 id="bis naming guidelines">BIS Naming Guidelines</h3>
    <ul>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/naming-guidelines/rules-and-recommendations" class="table-of-contents-link">Rules and Recommendations</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/naming-guidelines/special-terms" class="table-of-contents-link">Special Terms</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/naming-guidelines/summary-of-exceptions" class="table-of-contents-link">Summary of Exceptions</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/naming-guidelines/standard-abbreviations-and-acronyms" class="table-of-contents-link">Abbreviations and Acronyms</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/naming-guidelines/standard-relationship-strengths-names" class="table-of-contents-link">Relationship &#x201C;Strengths&#x201D;</a></li>
    </ul>
    <p>&#xA0;</p>
    <h3 id="ec">EC</h3>
    <ul>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-schema" class="table-of-contents-link">ECSchema</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-class" class="table-of-contents-link">ECClass</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-entity-class" class="table-of-contents-link">ECEntityClass</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-mixin-class" class="table-of-contents-link">ECMixinClass</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-struct-class" class="table-of-contents-link">ECStructClass</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-custom-attribute-class" class="table-of-contents-link">ECCustomAttributeClass</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-relationship-class" class="table-of-contents-link">ECRelationshipClass</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-property" class="table-of-contents-link">ECProperty</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-custom-attributes" class="table-of-contents-link">ECCustomAttributes</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-enumeration" class="table-of-contents-link">ECEnumeration</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/kindofquantity" class="table-of-contents-link">KindOfQuantity</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/property-category" class="table-of-contents-link">PropertyCategory</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/primitive-types" class="table-of-contents-link">PrimitiveTypes</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/customattribute-container-types" class="table-of-contents-link">CustomAttribute Container Types</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-unit" class="table-of-contents-link">Unit</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-constant" class="table-of-contents-link">Constant</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-phenomenon" class="table-of-contents-link">Phenomenon</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-unitsystem" class="table-of-contents-link">UnitSystem</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-format" class="table-of-contents-link">Format</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/ec-name" class="table-of-contents-link">ECName</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/ec/differences-between-ec2-and-ec3" class="table-of-contents-link">Changes Between ECObjects 2 and 3</a></li>
    </ul>
    </body></html>
            </ul>
        </div>
    </nav>    <div class='documentation-main'>
        <article id="main" class="main-content">
            <button type="button" id="sidebarCollapse" class="no-user-select"> <i class="bread-crumb-label bread-crumb-expand-leftnav icon icon-chevron-right no-user-select" id="expand-leftnav"></i></button><div class='bread-crumb-label'><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/bis/">Base Infrastructure Schema</a> > <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/bis/intro/">intro</a> > relationship-fundamentals</div>
            <div class="edit-link"><a href="https://bentleycs.visualstudio.com/iModelTechnologies/iModelTechnologies/_git/imodeljs?path=/docs/core/bis%2Fintro%2Frelationship-fundamentals.md" target="_blank">Edit this page</a></div>
            <h1 id="relationship fundamentals">Relationship Fundamentals</h1>
<h2 class="h-introduction">Introduction<a id="introduction" class="heading-anchor" href="#introduction"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Relationships are one of the main building blocks of BIS. They are used to define associations among entities. More specifically, BIS depends heavily upon EC relationships to define its conceptual schema. With the exception of relationships used by navigation properties, all relationships in BIS must inherit from some relationship in the core. The most commonly used core relationships are:</p>
<ul>
<li>ElementOwnsChildElements</li>
<li>ElementRefersToElements</li>
<li>ElementOwnsUniqueAspect / ElementOwnsMultiAspects</li>
<li>ModelContainsElements</li>
</ul>
<h2 class="h-relationship-inheritance-in-bis">Relationship Inheritance in BIS<a id="relationship-inheritance-in-bis" class="heading-anchor" href="#relationship-inheritance-in-bis"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Relationship inheritance is supported in BIS, but is tightly constrained. All relationships must be abstract, concrete or sealed:</p>
<ul>
<li><p>Abstract relationship classes can never be instantiated. ElementRefersToElements is an example of an abstract relationship. It must be subclassed to be instantiated.</p>
</li>
<li><p>Concrete relationship classes can be inherited from and can be instantiated. ElementOwnsUniqueAspect is an example of a Concrete relationship.</p>
</li>
<li><p>Sealed relationship classes can never be inherited from. ModelContainsElements is an example of a sealed relationship.</p>
</li>
</ul>
<p>In addition, all BIS relationships, excepting the ones used to define new navigation properties, must inherit (directly or indirectly) from a relationship in the BIS core.</p>
<p>Inheriting relationships must &#x201C;narrow&#x201D; the relationship:</p>
<ul>
<li>Equal or more-specific sources and targets.</li>
<li>Equal or more-restrictive multiplicity.</li>
<li>The polymorphic flag may be changed from <code>true</code> to <code>false</code> but not <code>false</code> to <code>true</code>.</li>
<li>Strength and direction must be the same.</li>
</ul>
<h2 class="h-relationship-strength">Relationship Strength<a id="relationship-strength" class="heading-anchor" href="#relationship-strength"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The strength of a relationship defines the lifetime of objects on its target end point and therefore, it must be specified. The two accepted strengths in BIS are:</p>
<ul>
<li><p>Embedding: Objects control the lifetime of some other objects, considered their children. That is, when a parent object is deleted, related child objects will be deleted as well. ElementOwnsChildElements is an example of an embedding relationship.</p>
</li>
<li><p>Referencing: Objects point to some other objects without controlling their lifetime. ElementRefersToElements is an example of a referencing relationship.</p>
</li>
</ul>
<p>The strength direction of a relationship specifies the orientation in which the strength is interpreted. That is, in a <code>Forward</code> relationship, its strength is enforced from Source to Target. Whereas in a <code>Backward</code> relationship, its strength is enforced from Target to Source. If a relationship does not specify a strength direction, <code>Forward</code> is assumed by default.</p>
<p>ElementOwnsChildElements is an example of a <code>Forward</code> relationship.  ModelModelsElement is an example of a <code>Backward</code> relationship since its embedding strength is enforced from an Element to its Model.</p>
<p>In most cases, both the strength and direction of a relationship are already defined by base relationships defined at the core. These settings cannot be modified or overridden by subclasses.</p>
<h2 class="h-relationship-multiplicity">Relationship multiplicity<a id="relationship-multiplicity" class="heading-anchor" href="#relationship-multiplicity"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Each endpoint of a relationship must define a multiplicity, they together define the cardinality of the relationship.  The multiplicity format specifies the number of times an endpoint may be used in this relationship.  It is defined using the format <code>(&lt;lower&gt;..&lt;upper&gt;)</code>.  Lower must be between <code>0</code> and <code>*</code> and upper between <code>1</code> and <code>*</code>, where <code>*</code> represents unbounded.</p>
<h3 class="h-example">Example<a id="example" class="heading-anchor" href="#example"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<pre class="no-line-numbers"><code class="language-xml">&lt;ECRelationshipClass typeName=&quot;ElementOwnsChildElements&quot; strength=&quot;embedding&quot; modifier=&quot;None&quot;&gt;
    &lt;Source multiplicity=&quot;(0..1)&quot; roleLabel=&quot;owns child&quot; polymorphic=&quot;true&quot;&gt;
        &lt;Class class=&quot;Element&quot;/&gt;
    &lt;/Source&gt;
    &lt;Target multiplicity=&quot;(0..*)&quot; roleLabel=&quot;is owned by parent&quot; polymorphic=&quot;true&quot;&gt;
        &lt;Class class=&quot;Element&quot;/&gt;
    &lt;/Target&gt;
&lt;/ECRelationshipClass&gt;</code></pre>
<p>The ElementOwnsChildElements relationship defines the following constraints:</p>
<ul>
<li><p>The parent Element (Source) may own any number of child Elements (Target).  Determined by the Target multiplicity.</p>
</li>
<li><p>The parent Element controls the lifetime of the child Elements, so deleting the parent deletes the children.  Determined by the relationship strength.  NOTE: Direction is assumed to be from Source to Target because none is specified.</p>
</li>
<li><p>An Element may only have one parent. Determined by the Source multiplicity.</p>
</li>
</ul>
<p>Relationships that derive from ElementOwnsChildElements may make the following changes</p>
<ul>
<li><p>Make the relationship mandatory for the parent by changing the target multiplicity to <code>(1..*)</code>.</p>
</li>
<li><p>Make the relationship mandatory for the child by changing the source multiplicity to <code>(1..1)</code>.</p>
</li>
<li><p>Limit the parent to only one child by changing the target multiplicity to <code>(0..1)</code>.</p>
</li>
<li><p>Limit either endpoint to a classes more specialized than Element by changing the Class constraint to an entity class which derives from Element.</p>
</li>
<li><p>Limit either endpoint to a specific class by changing the polymorphic flag to <code>false</code>.</p>
</li>
<li><p>Make the relationship abstract or sealed by changing the modifier to <code>Abstract</code> or <code>Sealed</code>.</p>
</li>
</ul>
<h2 class="h-supported-relationship-capabilities">Supported Relationship Capabilities<a id="supported-relationship-capabilities" class="heading-anchor" href="#supported-relationship-capabilities"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Relationships in BIS are restricted more than in plain EC.</p>
<ul>
<li><p>Relationship inheritance is strictly limited, as discussed previously. A relationship may only have a single base class.</p>
</li>
<li><p>Relationship end points must be either entity classes or link-table relationships.</p>
</li>
<li><p>Relationship end points must have a single constraint class.</p>
</li>
<li><p>Aspects are only allowed as the source of relationships behind navigational properties, or as the target of element-owns-aspect relationships.</p>
</li>
<li><p>Plain EC supports <code>Holding</code> as an additional type of relationship strength, but it is not supported by BIS.</p>
</li>
</ul>
<h2 class="h-implementation-details-limiting-relationship-flexibility">Implementation Details Limiting Relationship Flexibility<a id="implementation-details-limiting-relationship-flexibility" class="heading-anchor" href="#implementation-details-limiting-relationship-flexibility"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>For the purposes of optimized performance of BIS applications using iModel technology, the full power of relationships is not available in all cases. To understand these limitations, it helps to understand the 2 implementations of relationships in iModel databases.</p>
<h3 class="h-imodel-specific-implications-of-relationship-inheritance">iModel-specific implications of Relationship Inheritance<a id="imodel-specific-implications-of-relationship-inheritance" class="heading-anchor" href="#imodel-specific-implications-of-relationship-inheritance"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<ul>
<li><p>If the relationship is not sealed (can be subclassed) then an additional database column is required to store the relationship class Id. This is the case of the ElementOwnsChildElements relationship which is expected to be subclassed.</p>
</li>
<li><p>Sealed relationships with no base class and no subclasses will not need an extra column to store the relationship class Id. This is the case of the ModelContainsElements relationship, which is marked as sealed with no base class.</p>
</li>
</ul>
<h3 class="h-link-table">Link Table<a id="link-table" class="heading-anchor" href="#link-table"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>In iModel databases, there is a single link table (bis_ElementRefersToElements) that supports all relationships between elements with either of these requirements:</p>
<ul>
<li><p>Both the source and the target have unconstrained multiplicity <code>(*..*)</code></p>
</li>
<li><p>The relationship can contain properties.</p>
</li>
</ul>
<p>All relationships that have either of these requirements must inherit from the ElementRefersToElements relationship in the BIS Core schema.</p>
<p>Note that neither Models nor Aspects may be the source nor target of relationships in the link table, and therefore Models and Aspects cannot be involved in relationships with properties or relationships with <code>(*..*)</code> multiplicity.</p>
<p>An example of a relationship stored in the Link Table is the ElementGroupsMembers relationship that has the unconstrained multiplicity <code>(*..*)</code>.</p>
<h3 class="h-navigation-properties">Navigation Properties<a id="navigation-properties" class="heading-anchor" href="#navigation-properties"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>Navigation Properties are analogous to foreign keys but exposed as EC properties and  EC relationships. As an implementation detail for iModels, their relationship storage (and presentation) strategy enables access via a foreign key of the object being pointed to in the object pointing to it. The side of the relationship stored in the foreign key must have a multiplicity of <code>(0..1)</code> or <code>(1..1)</code>. The Navigation property is always defined in the base relationship and never via subclassing.</p>
<p>For sealed Navigation Properties, a single foreign key database column is used to store the relationship. An example of the use of a navigation property for a sealed relationship is the ModelContainsElements relationship. The relationship has a multiplicity of <code>(1..1)</code> on the source side (every Element must be in a Model), so the relationship is stored in the Model navigation property of the target Element.</p>
<p>Regarding subclassable Navigation Property relationships, ElementOwnsChildElements relationship can be reviewed as an example. This relationship is not sealed (it can be, and often is, subclassed) so two database columns are used to store it. The relationship has a multiplicity of <code>(0..1)</code> on the source side (every Element has 0 or 1 parent), so the relationship is stored in the Parent navigation property of the target.</p>
<p>Lastly, Navigation Properties can also be defined for Link table relationships. In this case, the link table relationship is specified as an end point of the Navigation Property relationship.</p>
<blockquote>
<p>Next: <a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./bis/intro/schemas-domains'>Schemas</a></p>
</blockquote>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>08 May, 2019</span>
            </p>
            <div id="imodeljs-github-comments">
            </div>
            
            <script>
              $(document).ready(function () {
                function initializeComments(repo) {
                  var s = document.createElement('script');
                  s.src = "http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/utterances/client.js";
                  s.setAttribute('repo', repo);
                  s.setAttribute('issue-term', 'title');
                  s.setAttribute('crossorigin', 'anonymous');
                  s.setAttribute('theme', 'github-light');
                  s.async = true;
            
                  document.getElementById("imodeljs-github-comments").appendChild(s);
                }
            
                var shouldShow = ldclient.variation(featureFlags.GithubIssuesFeedback);
            
                // shouldShow is undefined when ldclient has not emitted 'ready'.
                if (shouldShow === undefined) {
                  ldclient.on('ready', function () {
                    var gitIssueFlag = ldclient.variation(featureFlags.GithubIssuesFeedback);
                    var gitRepo = ldclient.variation(featureFlags.GitRepo);
                    if (gitIssueFlag) {
                      initializeComments(gitRepo);
                    }
                  });
                }
                else if (shouldShow) {
                  var gitRepo = ldclient.variation(featureFlags.GitRepo);
                  initializeComments(gitRepo);
                }
              });
            </script>
            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div class="toc-overlay"></div>
    <div id='inner-table-of-contents'>
       <!-- <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#introduction">Introduction</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#relationship-inheritance-in-bis">Relationship Inheritance in BIS</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#relationship-strength">Relationship Strength</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-relationship-multiplicity" class='title' href="#relationship-multiplicity"/>
            <b class='dropdown-menu-title menu-text'>Relationship multiplicity</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-relationship-multiplicity" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#example">Example</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#supported-relationship-capabilities">Supported Relationship Capabilities</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-implementation-details-limiting-relationship-flexibility" class='title' href="#implementation-details-limiting-relationship-flexibility"/>
            <b class='dropdown-menu-title menu-text'>Implementation Details Limiting Relationship Flexibility</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-implementation-details-limiting-relationship-flexibility" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#imodel-specific-implications-of-relationship-inheritance">iModel-specific implications of Relationship Inheritance</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#link-table">Link Table</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#navigation-properties">Navigation Properties</a>
                    </li>
            </ul>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;"
            src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo"
            style="zoom:75%; width: 162px; height: 37px;"
            src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/bundle.js"></script>
</body>

</html>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/monaco-editor/min/vs/loader.js"></script>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/ts-playground.js"></script>
