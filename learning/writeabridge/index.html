<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Write an iModel Bridge - iModel.js</title>
    <meta name="og:title" content="Write an iModel Bridge - iModel.js">
    <meta name="twitter:title" content="Write an iModel Bridge - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/bundle.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
    
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/landingPage.css"> 
    
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/devRegistration.css">  
        <link rel='shortcut icon' type='image/x-icon' href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/ class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/" class="navbar-brand">
                            <img id="site-logo" class="site-logo" src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-logo.svg" /> 
                            <img id="site-logo-small" class="site-logo-small" src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-icon.svg" style="display:none;"/> 
                    </a>
                    <button class="navbar-toggler no-user-select mr-auto" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-header"></span>
                    </button>
                    <ul class="navbar-nav ml-auto pr-0 nav-search">
                        <span class='search-bar'>
                          <li>
                            <div id='search-container'>
                            </div>
                          </li>
                          <script>
                            (function() {
                              var cx = '018053174497532353467:v_gnrjjlqwc';
                              var gcse = document.createElement('script');
                              gcse.type = 'text/javascript';
                              gcse.async = true;
                              gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                              var s = document.getElementsByTagName('script')[0];
                              s.parentNode.insertBefore(gcse, s);
                            })();
                          </script>
                          <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                        </span>
                    </ul>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/getting-started">Getting Started</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/bis">BIS</a></li><li class="nav-item active"><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/reference">API Reference</a></li><li class="nav-item change-history-tab "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/changehistory">v0.190.0</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
<div id='main-wrapper'>
    <nav id='sidebar'>
        <div id='table-of-contents' class="custom-scrollbar">
            <div id="dismiss">
                <i id="dismiss-arrow" class="icon icon-chevron-left no-user-select"></i>
            </div>
            <hr id="dismiss-hr" class='sm-only'>
            <ul id='main-navigation-list'>
                <html><head></head><body><h3 id="the imodel.js library"><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/" class="table-of-contents-link">The iModel.js Library</a></h3>
    <ul>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/frontend/" class="table-of-contents-link">Frontend</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/backend/" class="table-of-contents-link">Backend</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/common/" class="table-of-contents-link">Common</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/geometry/" class="table-of-contents-link">Geometry</a></li>
    </ul>
    <hr>
    <p>&#xA0;</p>
    <h3 id="helpful links">Helpful links</h3>
    <ul>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/imodelhub/" class="table-of-contents-link">iModelHub</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/faq" class="table-of-contents-link">Frequently Asked Questions</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/glossary" class="table-of-contents-link">iModel.js Glossary</a></li>
    </ul>
    </body></html>
            </ul>
        </div>
    </nav>    <div class='documentation-main'>
        <article id="main" class="main-content">
            <button type="button" id="sidebarCollapse" class="no-user-select"> <i class="bread-crumb-label bread-crumb-expand-leftnav icon icon-chevron-right no-user-select" id="expand-leftnav"></i></button><div class='bread-crumb-label'><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/">Learning</a> > WriteABridge</div>
            <div class="edit-link"><a href="https://bentleycs.visualstudio.com/iModelTechnologies/iModelTechnologies/_git/imodeljs?path=/docs/core/learning%2FWriteABridge.md" target="_blank">Edit this page</a></div>
            <h1 id="write an imodel bridge">Write an iModel Bridge</h1>
<p>As explained in the <a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/imodel-bridges'>overview</a>, a &quot;bridge&quot; is a program that:</p>
<ol>
<li>Reads information from a data source,</li>
<li>Aligns the source data with the BIS schema and preferrably a domain schema, and</li>
<li>Writes BIS data to an iModel.</li>
</ol>
<p>Specificaly, a bridge must:</p>
<ul>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/imodeldb'>Open a local briefcase copy</a> of the iModel that is to be updated.</li>
<li>Import or Update Schema<ul>
<li>Possibly <a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/schemasandelementsintypescript/#importing-the-schema'>import an appropriate BIS schema into the briefcase</a>  or upgrade an existing schema.</li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/imodeldbreadwrite/#pushing-changes-to-imodelhub'>Push</a> the results to the iModelServer.</li>
</ul>
</li>
<li>Convert Changed Data<ul>
<li>Connect to the data source.</li>
<li>Detect changes to the source data.</li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/imodel-bridges/#data-alignment'>Transform</a> the new or changed source data into the target BIS schema.</li>
<li>Write the resulting BIS data to the local briefcase.</li>
<li>Remove BIS data corresponding to deleted source data.</li>
<li>Obtain required <a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/concurrencycontrol'>Locks and Codes</a> from the iModel server and/or code server.</li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/imodeldbreadwrite/#pushing-changes-to-imodelhub'>Push</a> changes to the iModel server.</li>
</ul>
</li>
</ul>
<h2 class="h-writing-a-bridge">Writing a bridge<a id="writing-a-bridge" class="heading-anchor" href="#writing-a-bridge"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>A bridge would import the following packages:</p>
<pre class="no-line-numbers"><code class="language-typescript">import { Id64String, ClientRequestContext } from &quot;@bentley/bentleyjs-core&quot;;
import { BriefcaseManager, CategorySelector, ConcurrencyControl, DefinitionModel, DisplayStyle3d, IModelDb, IModelHost, ModelSelector, OpenParams, OrthographicViewDefinition, PhysicalModel, SpatialCategory, Subject } from &quot;@bentley/imodeljs-backend&quot;;
import { ColorByName, ColorDef, IModel } from &quot;@bentley/imodeljs-common&quot;;
</code></pre>
<p>When the bridge runs for the very first time, it would look like the following. This example revolves around the fictitious &quot;RobotWorld&quot; schema. RobotWorld consists of Robots and Barriers. The details of RobotWorld and its schema are not important. The steps, such as importing a schema, reserving codes, pushing changesets, creating definition models, etc., are the important points to see in the example code.</p>
<pre class="no-line-numbers"><code class="language-typescript">async function runBridgeFirstTime(requestContext: AuthorizedClientRequestContext, iModelId: string, projectId: string, assetsDir: string) {
  // Start the IModelHost
  IModelHost.startup();

  const briefcase = await IModelDb.open(requestContext, projectId, iModelId, OpenParams.pullAndPush());
  briefcase.concurrencyControl.setPolicy(new ConcurrencyControl.OptimisticPolicy());

  // I. Import the schema.
  await briefcase.importSchema(requestContext, path.join(assetsDir, &quot;RobotWorld.ecschema.xml&quot;));
  //    You must acquire all locks reserve all Codes used before saving or pushing.
  await briefcase.concurrencyControl.request(requestContext);
  //    You *must* push this to the iModel right now.
  briefcase.saveChanges();
  await briefcase.pullAndMergeChanges(requestContext);
  await briefcase.pushChanges(requestContext);

  // II. Import data

  // 1. Create the bridge&apos;s job subject and definition models.
  //    To keep things organized and to avoid name collisions with other bridges and apps,
  //    a bridge should normally create its own unique subject and then scope its models and
  //    definitions under that.
  const jobSubjectId = Subject.insert(briefcase, IModel.rootSubjectId, &quot;RobotWorld&quot;); // Job subject name must be unique among job subjects
  const defModelId = DefinitionModel.insert(briefcase, jobSubjectId, &quot;definitions&quot;);

  //  Create the spatial categories that will be used by the Robots and Barriers that will be imported.
  SpatialCategory.insert(briefcase, defModelId, Robot.classFullName, { color: new ColorDef(ColorByName.silver) });
  SpatialCategory.insert(briefcase, defModelId, Barrier.classFullName, { color: new ColorDef(ColorByName.brown) });

  // 2. Convert elements, aspects, etc.

  // For this example, we&apos;ll put all of the in-coming elements in a single model.
  const spatialModelId = PhysicalModel.insert(briefcase, jobSubjectId, &quot;spatial model 1&quot;);

  //  Pretend that I connected to a datasource and read it.
  //  In this simple example, the source format is JSON. It could be anything.
  //  Whatever the format, the bridge must be able to read it.
  const sourceData: RobotWorldProps = {
    barriers: [
      { location: { x: 0, y: 5, z: 0 }, angle: { degrees: 0 }, length: 5 },
    ],
    robots: [
      { location: { x: 0, y: 0, z: 0 }, name: &quot;r1&quot; },
    ],
  };
  convertToBis(briefcase, spatialModelId, sourceData);

  // 3. Create views.
  //    Note that the view definition and helper objects go into the definition model, not the spatial model.
  //    Note how Element IDs are captured as strings.
  const viewName = &quot;Test Robot View&quot;;
  const modelSelectorId = ModelSelector.insert(briefcase, defModelId, viewName, [spatialModelId]);
  const spatialCategoryIds = [Robot.getCategory(briefcase).id, Barrier.getCategory(briefcase).id];
  const categorySelectorId = CategorySelector.insert(briefcase, defModelId, viewName, spatialCategoryIds);
  const displayStyleId = DisplayStyle3d.insert(briefcase, defModelId, viewName);
  const viewRange = new Range3d(0, 0, 0, 10, 10, 1); // Note that you could compute the extents from the imported geometry. But real-world assets have known extents.
  OrthographicViewDefinition.insert(briefcase, defModelId, viewName, modelSelectorId, categorySelectorId, displayStyleId, viewRange);

  //  III. Push the data changes to iModel Server

  // 1. Acquire Resources
  //    You must reserve all Codes used before saving or pushing.
  await briefcase.concurrencyControl.request(requestContext);

  // 2. Pull and then push.
  //    Note that you pull and merge first, in case another user has pushed.
  briefcase.saveChanges();
  await briefcase.pullAndMergeChanges(requestContext);
  await briefcase.pushChanges(requestContext);
}
</code></pre>
<p>See:</p>
<ul>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/schemasandelementsintypescript/#importing-the-schema'>Importing a schema and bootstrapping definitions</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/common/accesstoken'>AccessToken</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/imodeljs-backend/imodels/imodeldb/#create'>IModelDb.create</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/imodeljs-backend/imodels/imodeldb/savechanges'>IModelDb.saveChanges</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/imodeljs-backend/imodels/imodeldb/pullandmergechanges'>IModelDb.pullAndMergeChanges</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/imodeljs-backend/imodels/imodeldb/pushchanges'>IModelDb.pushChanges</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/concurrencycontrol'>ConcurrencyControl</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/imodeljs-backend/models/definitionmodel/insert'>DefinitionModel.insert</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/imodeljs-backend/models/physicalmodel/insert'>PhysicalModel.insert</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/createelements/#subject'>Insert a Subject element</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/createelements/#modelselector'>Insert a ModelSelector element</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/createelements/#categoryselector'>Insert a CategorySelector element</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/createelements/#displaystyle3d'>Insert a DisplayStyle3d element</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/backend/createelements/#orthographicviewdefinition'>Insert a OrthographicViewDefinition element</a></li>
<li><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/common/logging'>Logging</a></li>
</ul>
<p>Here is a simple example of a fictitious source data format and the logic to convert and write it to an iModel:</p>
<pre class="no-line-numbers"><code class="language-typescript">interface BarrierProps {
  location: XYZProps;
  angle: AngleProps;
  length: number;
}

interface RobotProps {
  location: XYZProps;
  name: string;
}

interface RobotWorldProps {
  barriers: BarrierProps[];
  robots: RobotProps[];
}

// In this simple example, the source format is assumed to be JSON. It could be anything that the bridge
// can read. In this simple example, the conversion does not involve any alignment transformations. In general,
// the bridge&apos;s logic would perform non-trivial alignment of the source data into a BIS industry domain schema.
function convertToBis(briefcase: IModelDb, modelId: Id64String, data: RobotWorldProps) {
  for (const barrier of data.barriers) {
    RobotWorldEngine.insertBarrier(briefcase, modelId, Point3d.fromJSON(barrier.location), Angle.fromJSON(barrier.angle), barrier.length);
  }
  for (const robot of data.robots) {
    RobotWorldEngine.insertRobot(briefcase, modelId, robot.name, Point3d.fromJSON(robot.location));
  }
}
</code></pre>
<h2 class="h-detecting-and-pushing-changes">Detecting and pushing changes<a id="detecting-and-pushing-changes" class="heading-anchor" href="#detecting-and-pushing-changes"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Rather than starting over when the source data changes, a bridge should be able to detect and convert only the changes. That makes for compact, meaningful ChangeSets, which are added to the iModel&apos;s
<a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/imodelhub//#the-timeline-of-changes-to-an-imodel'>timeline</a>.</p>
<p>In the case of source data that was previously converted and has changed, the bridge should update the data in the iModel that were the results of the previous conversion. In the case of source data that was previously converted and has been deleted in the source, the bridge should delete the results of the previous conversion. Source data that has been added should be inserted.</p>
<p>To do incremental updates, a bridge must do Id mapping and change-detection.</p>
<h3 class="h-id-mapping">Id mapping<a id="id-mapping" class="heading-anchor" href="#id-mapping"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>Id mapping is a way of looking up the data in the iModel that corresponds to a given piece of source data.</p>
<p>If the source data has stable, unique IDs, then Id mapping could be straightforward. The bridge just needs to record the source -&gt; BIS Id mappings somewhere. If the source data IDs are GUIDs, then the bridge can assign them to the federationGuid property value of the BIS elements that it creates. That way, the mappings will be directly recorded in the iModel itself.</p>
<p>If the soruce data does not have stable, unique IDs, then the bridge will have to use some other means of identifying pieces of source data in a stable way. A crytographic hash of the source data itself can work as a stable Id -- that is, it can be used to identify data that has not changed.</p>
<h3 class="h-change-detection">Change-detection<a id="change-detection" class="heading-anchor" href="#change-detection"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>Change-detection is a way of detecting changes in the source data.</p>
<p>If the source data is timestamped in some way, then the change-detection logic should be easy. The bridge just has to save the highest timestamp at the end of the conversion and then look for source data with later timestamps the next time it runs.</p>
<p>If timestamps are not available, then the bridge will have to use some other means of recording and then comparing the state of the source data from run to run. If conversion is cheap, then the source data can be be converted again and the results compared to the previous results, as stored in the iModel. Or, a crytographic hash of the source data may be used to represent the source data. The hash could be stored along with the mappings and used to detect changes.</p>
<p>A basic change-detection algorithm is:</p>
<ul>
<li>For each source data item:<ul>
<li>add source item&apos;s Id to the <em>source_items_seen</em> set</li>
<li>Look in the mappings for the corresponding data in the iModel (element, aspect, model)</li>
<li>If found,<ul>
<li>Detect if the source item&apos;s current data has changed. If so,<ul>
<li>Convert the source item to BIS data.</li>
<li>Update the corresponding data in the iModel</li>
</ul>
</li>
</ul>
</li>
<li>Else,<ul>
<li>Convert the source data to BIS data</li>
<li>Insert the new data into the iModel</li>
<li>Add the source data item&apos;s Id to the mappings</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Infer deletions:</p>
<ul>
<li>For each source data item Id previously converted<ul>
<li>if item Id is not in <em>source_items_seen</em><ul>
<li>Find the the corresponind data in the iModel<ul>
<li>Delete the data in the iModel</li>
<li>Remove the the source data item&apos;s Id from the mappings</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>08 May, 2019</span>
            </p>
            <div id="imodeljs-github-comments">
            </div>
            
            <script>
              $(document).ready(function () {
                function initializeComments(repo) {
                  var s = document.createElement('script');
                  s.src = "http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/utterances/client.js";
                  s.setAttribute('repo', repo);
                  s.setAttribute('issue-term', 'title');
                  s.setAttribute('crossorigin', 'anonymous');
                  s.setAttribute('theme', 'github-light');
                  s.async = true;
            
                  document.getElementById("imodeljs-github-comments").appendChild(s);
                }
            
                var shouldShow = ldclient.variation(featureFlags.GithubIssuesFeedback);
            
                // shouldShow is undefined when ldclient has not emitted 'ready'.
                if (shouldShow === undefined) {
                  ldclient.on('ready', function () {
                    var gitIssueFlag = ldclient.variation(featureFlags.GithubIssuesFeedback);
                    var gitRepo = ldclient.variation(featureFlags.GitRepo);
                    if (gitIssueFlag) {
                      initializeComments(gitRepo);
                    }
                  });
                }
                else if (shouldShow) {
                  var gitRepo = ldclient.variation(featureFlags.GitRepo);
                  initializeComments(gitRepo);
                }
              });
            </script>
            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div class="toc-overlay"></div>
    <div id='inner-table-of-contents'>
       <!-- <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#writing-a-bridge">Writing a bridge</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-detecting-and-pushing-changes" class='title' href="#detecting-and-pushing-changes"/>
            <b class='dropdown-menu-title menu-text'>Detecting and pushing changes</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-detecting-and-pushing-changes" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#id-mapping">Id mapping</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#change-detection">Change-detection</a>
                    </li>
            </ul>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;"
            src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo"
            style="zoom:75%; width: 162px; height: 37px;"
            src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/bundle.js"></script>
</body>

</html>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/monaco-editor/min/vs/loader.js"></script>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/ts-playground.js"></script>
