<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Codes and Locks conflicts - iModel.js</title>
    <meta name="og:title" content="Codes and Locks conflicts - iModel.js">
    <meta name="twitter:title" content="Codes and Locks conflicts - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/bundle.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
    
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/landingPage.css"> 
    
    <link rel="stylesheet" type="text/css" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/styles/devRegistration.css">  
        <link rel='shortcut icon' type='image/x-icon' href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/ class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/" class="navbar-brand">
                            <img id="site-logo" class="site-logo" src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-logo.svg" /> 
                            <img id="site-logo-small" class="site-logo-small" src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-icon.svg" style="display:none;"/> 
                    </a>
                    <button class="navbar-toggler no-user-select mr-auto" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-header"></span>
                    </button>
                    <ul class="navbar-nav ml-auto pr-0 nav-search">
                        <span class='search-bar'>
                          <li>
                            <div id='search-container'>
                            </div>
                          </li>
                          <script>
                            (function() {
                              var cx = '018053174497532353467:v_gnrjjlqwc';
                              var gcse = document.createElement('script');
                              gcse.type = 'text/javascript';
                              gcse.async = true;
                              gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                              var s = document.getElementsByTagName('script')[0];
                              s.parentNode.insertBefore(gcse, s);
                            })();
                          </script>
                          <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                        </span>
                    </ul>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/getting-started">Getting Started</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/bis">BIS</a></li><li class="nav-item active"><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/reference">API Reference</a></li><li class="nav-item change-history-tab "><a class="nav-link" href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/changehistory">v0.190.0</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
<div id='main-wrapper'>
    <nav id='sidebar'>
        <div id='table-of-contents' class="custom-scrollbar">
            <div id="dismiss">
                <i id="dismiss-arrow" class="icon icon-chevron-left no-user-select"></i>
            </div>
            <hr id="dismiss-hr" class='sm-only'>
            <ul id='main-navigation-list'>
                <html><head></head><body><h3 id="the imodel.js library"><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/" class="table-of-contents-link">The iModel.js Library</a></h3>
    <ul>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/frontend/" class="table-of-contents-link">Frontend</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/backend/" class="table-of-contents-link">Backend</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/common/" class="table-of-contents-link">Common</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/geometry/" class="table-of-contents-link">Geometry</a></li>
    </ul>
    <hr>
    <p>&#xA0;</p>
    <h3 id="helpful links">Helpful links</h3>
    <ul>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/imodelhub/" class="table-of-contents-link">iModelHub</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/faq" class="table-of-contents-link">Frequently Asked Questions</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
    <li><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./learning/glossary" class="table-of-contents-link">iModel.js Glossary</a></li>
    </ul>
    </body></html>
            </ul>
        </div>
    </nav>    <div class='documentation-main'>
        <article id="main" class="main-content">
            <button type="button" id="sidebarCollapse" class="no-user-select"> <i class="bread-crumb-label bread-crumb-expand-leftnav icon icon-chevron-right no-user-select" id="expand-leftnav"></i></button><div class='bread-crumb-label'><a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/">Learning</a> > <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/learning/imodelhub/">imodelhub</a> > CodesAndLocksConflicts</div>
            <div class="edit-link"><a href="https://bentleycs.visualstudio.com/iModelTechnologies/iModelTechnologies/_git/imodeljs?path=/docs/core/learning%2FiModelHub%2FCodesAndLocksConflicts.md" target="_blank">Edit this page</a></div>
            <h1 id="codes and locks conflicts">Codes and Locks conflicts</h1>
<p>When sending update requests for HubCodes and Locks (jointly refered to as resources) to iModelHub, it&apos;s possible that there could be conflicts due to other users requesting and using same resources.</p>
<h2 class="h-conflict-types">Conflict types<a id="conflict-types" class="heading-anchor" href="#conflict-types"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/bentleyjs-core/errors/imodelhubstatus/#conflictsaggregate'>IModelHubStatus.ConflictsAggregate</a> can occur when any of the following errors occur and are <a href="#ignoring-conflicts">ignored</a>.</p>
<p><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/bentleyjs-core/errors/imodelhubstatus/#codereservedbyanotherbriefcase'>IModelHubStatus.CodeReservedByAnotherBriefcase</a> or <a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/bentleyjs-core/errors/imodelhubstatus/#lockownedbyanotherbriefcase'>IModelHubStatus.LockOwnedByAnotherBriefcase</a> can occur when another Briefcase owns these resources.</p>
<p><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/bentleyjs-core/errors/imodelhubstatus/#codedoesnotexist'>IModelHubStatus.CodeDoesNotExist</a> or <a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/bentleyjs-core/errors/imodelhubstatus/#lockdoesnotexist'>IModelHubStatus.LockDoesNotExist</a> can occur when trying to send request with ChangeState modified for resources that do not exist.</p>
<p><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/bentleyjs-core/errors/imodelhubstatus/#pullisrequired'>IModelHubStatus.PullIsRequired</a> can occur when a Lock requires user to have a newer <a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/imodeljs-clients/imodelhub/changeset'>ChangeSet</a> merged into their Briefcase file. It can also occur if user didn&apos;t set their current ChangeSet id in the request.</p>
<p><a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/bentleyjs-core/errors/imodelhubstatus/#codestateinvalid'>IModelHubStatus.CodeStateInvalid</a> can occur when a Code with CodeState.Retired is being updated to CodeState.Reserved or CodeState.Used. It has to be updated to CodeState.Available first.</p>
<h2 class="h-handling-conflicts">Handling conflicts<a id="handling-conflicts" class="heading-anchor" href="#handling-conflicts"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<h3 class="h-large-requests">Large requests<a id="large-requests" class="heading-anchor" href="#large-requests"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>When updating very large amounts of resources, requests are split into multiple smaller requests. Usually all resources are updated as a single transaction. However, when splitting into multiple requests, each request is considered a separate transaction. If one of these requests fails, earlier requests will not be reverted automatically, but further requests will not be sent.</p>
<p>It&apos;s possible to specify the amount of resources single request using CodeUpdateOptions.codesPerRequest or LockUpdateOptions.locksPerRequest. However, that limit in general should not be increased, as it might cause individual requests to be too large and fail without reaching iModelHub. It could be useful to lower this limit when trying to get <a href="#detailed-reporting">detailed report</a> of conflicting resources.</p>
<h3 class="h-ignoring-conflicts">Ignoring conflicts<a id="ignoring-conflicts" class="heading-anchor" href="#ignoring-conflicts"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>Usually when a conflict occurs, all resources in that request will be reverted to their initial state. If the request should try to update as many of these resources as possible instead of trying to either update everything or nothing, these errors can be ignored on server. By setting CodeUpdateOptions.continueOnConflict or LockUpdateOptions.continueOnConflict to true, requests will continue updating resources when conflicts occur. An <a href='http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/./reference/bentleyjs-core/errors/imodelhubstatus/#conflictsaggregate'>IModelHubStatus.ConflictsAggregate</a> will be returned from iModelHub instead of any of the other status values. If large amount of resources are updated, any subsequent requests after failure will still be sent and aggregate error will be returned when all requests finish.</p>
<h3 class="h-detailed-reporting">Detailed reporting<a id="detailed-reporting" class="heading-anchor" href="#detailed-reporting"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>By default errors do not specify what resources caused the update to fail. CodeUpdateOptions.deniedCodes or LockUpdateOptions.deniedLocks can be set to true to return all of the failed resources. In case a lot of resources failed, error response will be truncated. It&apos;s possible to attempt ignoring these error response limits by specifying CodeUpdateOptions.unlimitedReporting or LockUpdateOptions.unlimitedReporting, but that can cause failures trying to send the error response itself. Alternatively it&apos;s possible to <a href="#large-requests">limit resources per request</a>.</p>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>08 May, 2019</span>
            </p>
            <div id="imodeljs-github-comments">
            </div>
            
            <script>
              $(document).ready(function () {
                function initializeComments(repo) {
                  var s = document.createElement('script');
                  s.src = "http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/utterances/client.js";
                  s.setAttribute('repo', repo);
                  s.setAttribute('issue-term', 'title');
                  s.setAttribute('crossorigin', 'anonymous');
                  s.setAttribute('theme', 'github-light');
                  s.async = true;
            
                  document.getElementById("imodeljs-github-comments").appendChild(s);
                }
            
                var shouldShow = ldclient.variation(featureFlags.GithubIssuesFeedback);
            
                // shouldShow is undefined when ldclient has not emitted 'ready'.
                if (shouldShow === undefined) {
                  ldclient.on('ready', function () {
                    var gitIssueFlag = ldclient.variation(featureFlags.GithubIssuesFeedback);
                    var gitRepo = ldclient.variation(featureFlags.GitRepo);
                    if (gitIssueFlag) {
                      initializeComments(gitRepo);
                    }
                  });
                }
                else if (shouldShow) {
                  var gitRepo = ldclient.variation(featureFlags.GitRepo);
                  initializeComments(gitRepo);
                }
              });
            </script>
            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div class="toc-overlay"></div>
    <div id='inner-table-of-contents'>
       <!-- <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#conflict-types">Conflict types</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-handling-conflicts" class='title' href="#handling-conflicts"/>
            <b class='dropdown-menu-title menu-text'>Handling conflicts</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-handling-conflicts" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#large-requests">Large requests</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#ignoring-conflicts">Ignoring conflicts</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#detailed-reporting">Detailed reporting</a>
                    </li>
            </ul>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;"
            src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo"
            style="zoom:75%; width: 162px; height: 37px;"
            src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/bundle.js"></script>
</body>

</html>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/monaco-editor/min/vs/loader.js"></script>
<script src="http://builds.bentley.com/prgbuilds/AzureBuilds/iModelJsDocs/public/scripts/ts-playground.js"></script>
